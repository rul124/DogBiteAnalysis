<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | Dog Bite Accident Analysis</title>
  <meta name="description" content="Chapter 4 Missing values | Dog Bite Accident Analysis" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | Dog Bite Accident Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | Dog Bite Accident Analysis" />
  
  
  

<meta name="author" content="Xiaorui Qin, Ziyu Fang, Ruoxi Liu" />


<meta name="date" content="2021-11-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Dog Bite Accidents</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.0.1" data-path="missing-values.html"><a href="missing-values.html#read-the-data"><i class="fa fa-check"></i><b>4.0.1</b> Read the data</a></li>
<li class="chapter" data-level="4.0.2" data-path="missing-values.html"><a href="missing-values.html#missing-values-by-column"><i class="fa fa-check"></i><b>4.0.2</b> Missing values by column</a></li>
<li class="chapter" data-level="4.0.3" data-path="missing-values.html"><a href="missing-values.html#missing-values-by-row"><i class="fa fa-check"></i><b>4.0.3</b> Missing values by row</a></li>
<li class="chapter" data-level="4.0.4" data-path="missing-values.html"><a href="missing-values.html#row-column-missing-patterns---heatmap"><i class="fa fa-check"></i><b>4.0.4</b> Row / column missing patterns - heatmap</a></li>
<li class="chapter" data-level="4.0.5" data-path="missing-values.html"><a href="missing-values.html#row-column-missing-patterns---gg_miss_fct"><i class="fa fa-check"></i><b>4.0.5</b> Row / column missing patterns - gg_miss_fct</a></li>
<li class="chapter" data-level="4.0.6" data-path="missing-values.html"><a href="missing-values.html#missing-patterns"><i class="fa fa-check"></i><b>4.0.6</b> Missing patterns</a></li>
<li class="chapter" data-level="4.0.7" data-path="missing-values.html"><a href="missing-values.html#missing-by-borough"><i class="fa fa-check"></i><b>4.0.7</b> Missing by borough</a></li>
<li class="chapter" data-level="4.0.8" data-path="missing-values.html"><a href="missing-values.html#number-of-missing-by-year"><i class="fa fa-check"></i><b>4.0.8</b> Number of missing by year</a></li>
<li class="chapter" data-level="4.0.9" data-path="missing-values.html"><a href="missing-values.html#number-of-missing-by-month"><i class="fa fa-check"></i><b>4.0.9</b> Number of missing by month</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Dog Bite Accident Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div id="read-the-data" class="section level3" number="4.0.1">
<h3><span class="header-section-number">4.0.1</span> Read the data</h3>
<p>We analyze the missing values of our data “Dog Bite Data” from <a href="https://data.cityofnewyork.us/Health/DOHMH-Dog-Bite-Data/rsgh-akpg" class="uri">https://data.cityofnewyork.us/Health/DOHMH-Dog-Bite-Data/rsgh-akpg</a>, which contains 10280 rows and 9 columns. We read the data and show the names of the 9 columns for analysis.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="missing-values.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="missing-values.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-3"><a href="missing-values.html#cb1-3" aria-hidden="true" tabindex="-1"></a>DogBite <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;DOHMH_Dog_Bite_Data.csv&quot;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">na.strings =</span> <span class="fu">c</span>(<span class="st">&quot;&quot;</span>))</span>
<span id="cb1-4"><a href="missing-values.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(DogBite)</span></code></pre></div>
<pre><code>## [1] &quot;UniqueID&quot;   &quot;DateOfBite&quot; &quot;Species&quot;    &quot;Breed&quot;     
## [5] &quot;Age&quot;        &quot;Gender&quot;     &quot;SpayNeuter&quot; &quot;Borough&quot;   
## [9] &quot;ZipCode&quot;</code></pre>
</div>
<div id="missing-values-by-column" class="section level3" number="4.0.2">
<h3><span class="header-section-number">4.0.2</span> Missing values by column</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="missing-values.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(<span class="fu">is.na</span>(DogBite)) <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="missing-values.html#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##        Age    ZipCode      Breed   UniqueID DateOfBite 
##       4746       2664       1587          0          0 
##    Species     Gender SpayNeuter    Borough 
##          0          0          0          0</code></pre>
<p>First, we show missing values by column. We could conclude that there are most missing values in “Age” while “ZipCode” and “Breed” come second and third. We can roughly analyze the possible reasons. Most of dog owners adopt or purchase their dogs, thus some of them may not be sure of the date of birth. Of course, dogs of some owners are born to the big dog at home, or they know the dogs’ birthday when they purchase them, but some owners are hard to know. This is a very common situation. In addition, many dog owners’ dogs may be hybrid breeds, or stray dogs adopted by owners. In these situations, owners may not be sure of the “breed” of their dogs. As for the “ZipCode”, dog bites may not always happen near the dog owners’ houses, so owners may not be familiar with the “ZipCode” there. Of course, many careful dog owners will inquire and fill in “ZipCode”, but others may not fill in it.</p>
<p>All of other columns do not have any missing value. In class, Prof. Robbins mentioned that we could consider the connection between some columns, such as the address and the zipcode. In our data, we noticed that there is no connection of missing values between “ZipCode” and “Borough” according to the current analysis. We could not see any other connections right now.</p>
</div>
<div id="missing-values-by-row" class="section level3" number="4.0.3">
<h3><span class="header-section-number">4.0.3</span> Missing values by row</h3>
<p>Since we have 10280 rows, it is not clear if we continue analyzing with all of the data. Our data only contains one file, thus we randomly select 40 rows for analysis.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="missing-values.html#cb5-1" aria-hidden="true" tabindex="-1"></a>sampleDogBite <span class="ot">&lt;-</span> <span class="fu">sample_n</span>(DogBite, <span class="dv">40</span>)</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="missing-values.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(<span class="fu">is.na</span>(sampleDogBite)) <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="missing-values.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>(<span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] 3 3 3 2 2 2 2 2 2 2 2 2 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 0
## [31] 0 0 0 0 0 0 0 0 0 0</code></pre>
<p>Then we show missing values by row from large to small. We found that rows with the most missing values miss 3 values (i.e, “Age”, “ZipCode”, and “Breed”), while rows with the least missing values miss 0 value. There are only a small part of events in which all three values are missing.</p>
</div>
<div id="row-column-missing-patterns---heatmap" class="section level3" number="4.0.4">
<h3><span class="header-section-number">4.0.4</span> Row / column missing patterns - heatmap</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="missing-values.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="missing-values.html#cb8-2" aria-hidden="true" tabindex="-1"></a>tidyDogBite <span class="ot">&lt;-</span> sampleDogBite <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="missing-values.html#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="missing-values.html#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(key, value, <span class="sc">-</span>id) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="missing-values.html#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(value), <span class="st">&quot;yes&quot;</span>, <span class="st">&quot;no&quot;</span>))</span>
<span id="cb8-6"><a href="missing-values.html#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tidyDogBite, <span class="fu">aes</span>(<span class="at">x =</span> key, <span class="at">y =</span> <span class="fu">fct_rev</span>(id), <span class="at">fill =</span> missing)) <span class="sc">+</span></span>
<span id="cb8-7"><a href="missing-values.html#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span> </span>
<span id="cb8-8"><a href="missing-values.html#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;DogBite with NAs added&quot;</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="missing-values.html#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span> <span class="co"># discrete scale</span></span>
<span id="cb8-10"><a href="missing-values.html#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-9-1.png" width="1152" /></p>
<p>Now we could show the heatmap to analyze the row / column missing patterns and distributions of missing values. In our heatmap, we discover that the vast majority of rows that miss “breed” and “ZipCode” also miss “Age”. There are only 2 exceptions in our 40 sample rows. One possible reason is that the most easily unknown characteristic of dogs is “age”. If dog owners do not know the age of dogs when adopting or purchasing it, it will be difficult to know in the future. However, the “breed” information can be identified through later medical tests, and “ZipCode” can also be queried after the dog bite events. If not even the easily known information of “breed” and “ZipCode” is available, it indicates that the data has limited information about these dogs and dog bite events, so it is easy to miss “age”.</p>
</div>
<div id="row-column-missing-patterns---gg_miss_fct" class="section level3" number="4.0.5">
<h3><span class="header-section-number">4.0.5</span> Row / column missing patterns - gg_miss_fct</h3>
<p>Since most columns of our dataset contain categorical data, it is not proper to analyze row / column missing patterns with mi::missing_data.frame() for heatmaps or with “geom_tile()” for missing values by variable as we discussed in class. In order to better analyze categorical data, we think “gg_miss_fct()” is a better choice. We choose three columns, i.e., “Gender”, “SpayNeuter”, and “Borough”, to analyze the patterns. The plots show the proportions of missing values in different categories of the certain column. Note that we use the entire dataset instead of our 40 samples in this part for better discussion.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="missing-values.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(naniar)</span>
<span id="cb9-2"><a href="missing-values.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_fct</span>(<span class="at">x =</span> DogBite, <span class="at">fct =</span> Gender)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>In the plot, “F” denotes “Female”, “M” denotes “Male”, and “U” denotes “Unknown”. The plot shows that most events whose “Gender” is “Unknown” miss “Age”, and about half of these events miss “Breed” and “ZipCode”. However, few events whose “Gender” is “Male” or “Female” miss “Age”, “Breed”, and “ZipCode”, and there is no great difference between the patterns of “Male” and “Female”. We could analyze this situation. As we discussed above, the most easily unknown characteristic of dogs is “Age”. If dog owners do not know the age of dogs when adopting or purchasing it, it will be difficult to know in the future. Although “breed” and “ZipCode” are also easily be missed, they are a little easier to be obtained than “Age”. The “breed” information can be identified through later medical tests, and “ZipCode” can also be queried after the dog bite events. However, the “Gender” information can be identified through observations or medical tests easily. If in an event, we do not even know the gender of the dog, it indicates that the data has limited information about these dogs and dog bite events, it is easy to miss “Age”, “Breed”, and “ZipCode”, especially “Age”. In addition, there is not much difference between patterns of missing values in female and male dogs, since the gender will not influence the patterns.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="missing-values.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_fct</span>(<span class="at">x =</span> DogBite, <span class="at">fct =</span> SpayNeuter)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>In the plot, “false” and “true” denote the situation of SpayNeuter of dogs. The plot shows that most events whose “SpayNeuter” is “false” miss “Age”, and about half of these events miss “Breed” and “ZipCode”. However, few events whose “SpayNeuter” is “true” miss “Age”, “Breed”, and “ZipCode”. We could analyze this situation. As we discussed above, the most easily unknown characteristic of dogs is “Age”. If dog owners do not know the age of dogs when adopting or purchasing it, it will be difficult to know in the future. Although “breed” and “ZipCode” are also easily be missed, they are a little easier to be obtained than “Age”. The “breed” information can be identified through later medical tests, and “ZipCode” can also be queried after the dog bite events. If in an event, “SpayNeuter” is true, which means the dog is well taken care of and controlled, these careful dog owners are more likely to know the “Age”, “Breed”, and “ZipCode”. By contrast, when it is false, it is more likely to miss “Age”, “Breed”, and “ZipCode”, especially “Age”.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="missing-values.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gg_miss_fct</span>(<span class="at">x =</span> DogBite, <span class="at">fct =</span> Borough)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>The plot denotes the patterns of missing values in different boroughs. The plot shows that whatever the borough is, it is more likely to miss “Age” than “Breed” and “ZipCode”, which is consistent with what we discussed above. There is one exception. When the “Borough” is “Other”, i.e., we do not know the specific borough, 50% of events miss “ZipCode”. This is reasonable and Prof. Robbins also gave a similar example in class. Since both of “Borough” and “ZipCode” contain the information of the address, there is the connection between them. When we do not know the specific borough, it is likely to miss “ZipCode”.</p>
</div>
<div id="missing-patterns" class="section level3" number="4.0.6">
<h3><span class="header-section-number">4.0.6</span> Missing patterns</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="missing-values.html#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> mi<span class="sc">::</span><span class="fu">missing_data.frame</span>(sampleDogBite)</span></code></pre></div>
<pre><code>## NOTE: In the following pairs of variables, the missingness pattern of the first is a subset of the second.
##  Please verify whether they are in fact logically distinct variables.
##      [,1]    [,2]     
## [1,] &quot;Breed&quot; &quot;Age&quot;    
## [2,] &quot;Breed&quot; &quot;ZipCode&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="missing-values.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;missing_data.frame&quot;
## attr(,&quot;package&quot;)
## [1] &quot;mi&quot;</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="missing-values.html#cb16-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">@</span>patterns</span></code></pre></div>
<pre><code>##  [1] nothing             nothing             ZipCode            
##  [4] nothing             Age, ZipCode        Age, ZipCode       
##  [7] Breed, Age, ZipCode nothing             nothing            
## [10] Age, ZipCode        Age                 nothing            
## [13] nothing             nothing             nothing            
## [16] Age                 ZipCode             ZipCode            
## [19] Breed, Age, ZipCode ZipCode             nothing            
## [22] nothing             Age                 Age, ZipCode       
## [25] Age, ZipCode        Age, ZipCode        nothing            
## [28] Age                 Breed, Age, ZipCode Age, ZipCode       
## [31] Age, ZipCode        nothing             nothing            
## [34] Age, ZipCode        Age                 nothing            
## [37] Age                 nothing             Age                
## [40] nothing            
## 5 Levels: nothing ZipCode Age ... Breed, Age, ZipCode</code></pre>
<p>This part lists the situation of missing values of our 40 samples. Each one indicates the kinds of values that are missed in each sample.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="missing-values.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(x<span class="sc">@</span>patterns)</span></code></pre></div>
<pre><code>## [1] &quot;nothing&quot;             &quot;ZipCode&quot;            
## [3] &quot;Age&quot;                 &quot;Age, ZipCode&quot;       
## [5] &quot;Breed, Age, ZipCode&quot;</code></pre>
<p>This part lists all of the patterns above.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="missing-values.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x<span class="sc">@</span>patterns)</span></code></pre></div>
<pre><code>##             nothing             ZipCode                 Age 
##                  17                   4                   7 
##        Age, ZipCode Breed, Age, ZipCode 
##                   9                   3</code></pre>
<p>This part shows the specific counts of patterns above.</p>
<p>Then, we aim to create a missing values plot in the style of extracat::visna() (no longer available on CRAN) using ggplot2. First, we create the function for creating missing plots.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="missing-values.html#cb22-1" aria-hidden="true" tabindex="-1"></a>plot_missing <span class="ot">&lt;-</span> <span class="cf">function</span>(dataset, <span class="at">percent =</span> <span class="cn">TRUE</span>) {</span>
<span id="cb22-2"><a href="missing-values.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">library</span>(cowplot)</span>
<span id="cb22-3"><a href="missing-values.html#cb22-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-4"><a href="missing-values.html#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="do">###### for right plot ######</span></span>
<span id="cb22-5"><a href="missing-values.html#cb22-5" aria-hidden="true" tabindex="-1"></a>  missing_patterns <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">is.na</span>(dataset)) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="missing-values.html#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by_all</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="missing-values.html#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="at">name =</span> <span class="st">&quot;count&quot;</span>, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="missing-values.html#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb22-9"><a href="missing-values.html#cb22-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-10"><a href="missing-values.html#cb22-10" aria-hidden="true" tabindex="-1"></a>  missing_patterns <span class="ot">&lt;-</span> missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb22-11"><a href="missing-values.html#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pattern =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(missing_patterns)) <span class="sc">%&gt;%</span></span>
<span id="cb22-12"><a href="missing-values.html#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pattern =</span> <span class="fu">fct_reorder</span>(<span class="fu">as.factor</span>(pattern), count))<span class="sc">%&gt;%</span></span>
<span id="cb22-13"><a href="missing-values.html#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">alpha =</span> <span class="fu">ifelse</span>(</span>
<span id="cb22-14"><a href="missing-values.html#cb22-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">rowSums</span>(missing_patterns[, <span class="sc">-</span><span class="fu">ncol</span>(missing_patterns)]) <span class="sc">==</span> <span class="dv">0</span>, </span>
<span id="cb22-15"><a href="missing-values.html#cb22-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;dark&quot;</span>, <span class="st">&quot;light&quot;</span>))</span>
<span id="cb22-16"><a href="missing-values.html#cb22-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-17"><a href="missing-values.html#cb22-17" aria-hidden="true" tabindex="-1"></a>  missing_patterns<span class="sc">$</span>pattern <span class="ot">&lt;-</span> <span class="fu">factor</span>(missing_patterns<span class="sc">$</span>pattern,</span>
<span id="cb22-18"><a href="missing-values.html#cb22-18" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">levels =</span> <span class="fu">nrow</span>(missing_patterns)<span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb22-19"><a href="missing-values.html#cb22-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-20"><a href="missing-values.html#cb22-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">###### for up plot ######</span></span>
<span id="cb22-21"><a href="missing-values.html#cb22-21" aria-hidden="true" tabindex="-1"></a>  dataset1 <span class="ot">&lt;-</span> dataset <span class="sc">%&gt;%</span></span>
<span id="cb22-22"><a href="missing-values.html#cb22-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-23"><a href="missing-values.html#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="st">&quot;feature&quot;</span>, <span class="st">&quot;value&quot;</span>, <span class="sc">-</span>id) <span class="sc">%&gt;%</span></span>
<span id="cb22-24"><a href="missing-values.html#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">missing =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(value), <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb22-25"><a href="missing-values.html#cb22-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-26"><a href="missing-values.html#cb22-26" aria-hidden="true" tabindex="-1"></a>  missing_row <span class="ot">&lt;-</span> dataset1 <span class="sc">%&gt;%</span></span>
<span id="cb22-27"><a href="missing-values.html#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(feature) <span class="sc">%&gt;%</span></span>
<span id="cb22-28"><a href="missing-values.html#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(missing)) <span class="sc">%&gt;%</span></span>
<span id="cb22-29"><a href="missing-values.html#cb22-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">feature =</span> <span class="fu">fct_reorder</span>(feature, n))</span>
<span id="cb22-30"><a href="missing-values.html#cb22-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-31"><a href="missing-values.html#cb22-31" aria-hidden="true" tabindex="-1"></a>  missing_row<span class="sc">$</span>feature <span class="ot">&lt;-</span> <span class="fu">factor</span>(missing_row<span class="sc">$</span>feature, <span class="fu">rev</span>(<span class="fu">levels</span>(missing_row<span class="sc">$</span>feature)))</span>
<span id="cb22-32"><a href="missing-values.html#cb22-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-33"><a href="missing-values.html#cb22-33" aria-hidden="true" tabindex="-1"></a>  <span class="do">###### for middle plot ######</span></span>
<span id="cb22-34"><a href="missing-values.html#cb22-34" aria-hidden="true" tabindex="-1"></a>  dataset2 <span class="ot">&lt;-</span> missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb22-35"><a href="missing-values.html#cb22-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>count, <span class="sc">-</span>pattern) <span class="sc">%&gt;%</span></span>
<span id="cb22-36"><a href="missing-values.html#cb22-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-37"><a href="missing-values.html#cb22-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">gather</span>(<span class="st">&quot;feature&quot;</span>, <span class="st">&quot;value&quot;</span>, <span class="sc">-</span><span class="fu">c</span>(id, alpha))</span>
<span id="cb22-38"><a href="missing-values.html#cb22-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-39"><a href="missing-values.html#cb22-39" aria-hidden="true" tabindex="-1"></a>  dataset2<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">factor</span>(dataset2<span class="sc">$</span>id, <span class="at">levels =</span> <span class="fu">nrow</span>(missing_patterns)<span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb22-40"><a href="missing-values.html#cb22-40" aria-hidden="true" tabindex="-1"></a>  dataset2<span class="sc">$</span>feature <span class="ot">&lt;-</span> <span class="fu">factor</span>(dataset2<span class="sc">$</span>feature, <span class="at">levels =</span> <span class="fu">levels</span>(missing_row<span class="sc">$</span>feature))</span>
<span id="cb22-41"><a href="missing-values.html#cb22-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-42"><a href="missing-values.html#cb22-42" aria-hidden="true" tabindex="-1"></a>  middle <span class="ot">&lt;-</span> dataset2 <span class="sc">%&gt;%</span></span>
<span id="cb22-43"><a href="missing-values.html#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y =</span> id, <span class="at">fill =</span> value, <span class="at">alpha =</span> alpha)) <span class="sc">+</span></span>
<span id="cb22-44"><a href="missing-values.html#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_tile</span>(<span class="at">color =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-45"><a href="missing-values.html#cb22-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;grey&quot;</span>, <span class="st">&quot;purple&quot;</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-46"><a href="missing-values.html#cb22-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;variable&quot;</span>, <span class="at">y =</span> <span class="st">&quot;missing patterns&quot;</span>) <span class="sc">+</span> </span>
<span id="cb22-47"><a href="missing-values.html#cb22-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>, .<span class="dv">5</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-48"><a href="missing-values.html#cb22-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">annotate</span>(<span class="st">&quot;text&quot;</span>,</span>
<span id="cb22-49"><a href="missing-values.html#cb22-49" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> <span class="fu">rep</span>(<span class="dv">6</span>, <span class="fu">sum</span>(missing_patterns<span class="sc">$</span>alpha <span class="sc">==</span> <span class="st">&quot;dark&quot;</span>)),</span>
<span id="cb22-50"><a href="missing-values.html#cb22-50" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">length</span>(missing_patterns<span class="sc">$</span>alpha) <span class="sc">-</span> <span class="fu">which</span>(missing_patterns<span class="sc">$</span>alpha <span class="sc">==</span> <span class="st">&quot;dark&quot;</span>) <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb22-51"><a href="missing-values.html#cb22-51" aria-hidden="true" tabindex="-1"></a>             <span class="at">label =</span> <span class="fu">rep</span>(<span class="st">&quot;complete cases&quot;</span>, <span class="fu">sum</span>(missing_patterns<span class="sc">$</span>alpha <span class="sc">==</span> <span class="st">&quot;dark&quot;</span>))</span>
<span id="cb22-52"><a href="missing-values.html#cb22-52" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb22-53"><a href="missing-values.html#cb22-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> .<span class="dv">5</span>, <span class="at">hjust =</span> .<span class="dv">5</span>, <span class="at">angle =</span> <span class="dv">45</span>))</span>
<span id="cb22-54"><a href="missing-values.html#cb22-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-55"><a href="missing-values.html#cb22-55" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(percent <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb22-56"><a href="missing-values.html#cb22-56" aria-hidden="true" tabindex="-1"></a>    right <span class="ot">&lt;-</span> missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb22-57"><a href="missing-values.html#cb22-57" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>count, <span class="at">x=</span>pattern, <span class="at">alpha =</span> alpha)) <span class="sc">+</span> </span>
<span id="cb22-58"><a href="missing-values.html#cb22-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-59"><a href="missing-values.html#cb22-59" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-60"><a href="missing-values.html#cb22-60" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;row count&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-61"><a href="missing-values.html#cb22-61" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb22-62"><a href="missing-values.html#cb22-62" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>, .<span class="dv">5</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb22-63"><a href="missing-values.html#cb22-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-64"><a href="missing-values.html#cb22-64" aria-hidden="true" tabindex="-1"></a>    up <span class="ot">&lt;-</span> missing_row <span class="sc">%&gt;%</span></span>
<span id="cb22-65"><a href="missing-values.html#cb22-65" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb22-66"><a href="missing-values.html#cb22-66" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-67"><a href="missing-values.html#cb22-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb22-68"><a href="missing-values.html#cb22-68" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;num rows missing&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Missing value patterns&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-69"><a href="missing-values.html#cb22-69" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">angle =</span> <span class="dv">45</span>))</span>
<span id="cb22-70"><a href="missing-values.html#cb22-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-71"><a href="missing-values.html#cb22-71" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">=</span> <span class="fu">plot_grid</span>(up, <span class="cn">NULL</span>, middle, right, </span>
<span id="cb22-72"><a href="missing-values.html#cb22-72" aria-hidden="true" tabindex="-1"></a>                    <span class="at">rel_heights =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb22-73"><a href="missing-values.html#cb22-73" aria-hidden="true" tabindex="-1"></a>                    <span class="at">rel_widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>),</span>
<span id="cb22-74"><a href="missing-values.html#cb22-74" aria-hidden="true" tabindex="-1"></a>                    <span class="at">align =</span> <span class="st">&quot;hv&quot;</span>)</span>
<span id="cb22-75"><a href="missing-values.html#cb22-75" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (percent <span class="sc">==</span> <span class="cn">TRUE</span>) {</span>
<span id="cb22-76"><a href="missing-values.html#cb22-76" aria-hidden="true" tabindex="-1"></a>    right <span class="ot">&lt;-</span> missing_patterns <span class="sc">%&gt;%</span></span>
<span id="cb22-77"><a href="missing-values.html#cb22-77" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count<span class="sc">/</span><span class="fu">sum</span>(count) <span class="sc">*</span> <span class="dv">100</span>, <span class="at">x =</span> pattern, <span class="at">alpha =</span> alpha)) <span class="sc">+</span></span>
<span id="cb22-78"><a href="missing-values.html#cb22-78" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-79"><a href="missing-values.html#cb22-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb22-80"><a href="missing-values.html#cb22-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;% rows&quot;</span>, <span class="at">title =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-81"><a href="missing-values.html#cb22-81" aria-hidden="true" tabindex="-1"></a>      <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb22-82"><a href="missing-values.html#cb22-82" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">2</span>, .<span class="dv">5</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>)</span>
<span id="cb22-83"><a href="missing-values.html#cb22-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-84"><a href="missing-values.html#cb22-84" aria-hidden="true" tabindex="-1"></a>    up <span class="ot">&lt;-</span> missing_row <span class="sc">%&gt;%</span></span>
<span id="cb22-85"><a href="missing-values.html#cb22-85" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> feature, <span class="at">y =</span> n<span class="sc">/</span><span class="fu">nrow</span>(dataset)<span class="sc">*</span><span class="dv">100</span>)) <span class="sc">+</span> </span>
<span id="cb22-86"><a href="missing-values.html#cb22-86" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-87"><a href="missing-values.html#cb22-87" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb22-88"><a href="missing-values.html#cb22-88" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;num rows missing&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Missing value patterns&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-89"><a href="missing-values.html#cb22-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">angle =</span> <span class="dv">45</span>))</span>
<span id="cb22-90"><a href="missing-values.html#cb22-90" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-91"><a href="missing-values.html#cb22-91" aria-hidden="true" tabindex="-1"></a>    res <span class="ot">=</span> <span class="fu">plot_grid</span>(up, <span class="cn">NULL</span>, middle, right, </span>
<span id="cb22-92"><a href="missing-values.html#cb22-92" aria-hidden="true" tabindex="-1"></a>                    <span class="at">rel_heights =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb22-93"><a href="missing-values.html#cb22-93" aria-hidden="true" tabindex="-1"></a>                    <span class="at">rel_widths =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb22-94"><a href="missing-values.html#cb22-94" aria-hidden="true" tabindex="-1"></a>                    <span class="at">align =</span> <span class="st">&quot;hv&quot;</span>)</span>
<span id="cb22-95"><a href="missing-values.html#cb22-95" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-96"><a href="missing-values.html#cb22-96" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(res)</span>
<span id="cb22-97"><a href="missing-values.html#cb22-97" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Then we use the function to draw the plot. Note that we use the entire dataset instead of our 40 samples in this part for better discussion.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="missing-values.html#cb23-1" aria-hidden="true" tabindex="-1"></a>DogBiteForPlot <span class="ot">&lt;-</span> <span class="fu">subset</span>(DogBite, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(UniqueID))</span>
<span id="cb23-2"><a href="missing-values.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(DogBiteForPlot, <span class="at">percent =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>First, we could analyze the left upper corner of this plot, which sorts the counts of rows that miss certain values. We found that there are most missing values in “Age” while “ZipCode” and “Breed” come second and third. All of other columns do not have any missing value. We can analyze the possible reasons. Most of dog owners adopt or purchase their dogs, thus some of them may not be sure of the date of birth. Of course, dogs of some owners are born to the big dog at home, or they know the dogs’ birthday when they purchase them, but some owners are hard to know. This is a very common situation. In addition, many dog owners’ dogs may be hybrid breeds, or stray dogs adopted by owners. In these situations, owners may not be sure of the “breed” of their dogs. As for the “ZipCode”, dog bites may not always happen near the dog owners’ houses, so owners may not be familiar with the “ZipCode” there. Of course, many careful dog owners will inquire and fill in “ZipCode”, but others may not fill in it.</p>
<p>Second, we could analyze the left lower corner, which shows all of the patterns, i.e., miss nothing, only miss “Age”, miss “Age” and “ZipCode”, miss “Age” and “ZipCode” and “Breed”, only miss “ZipCode”, miss “Age” and “Breed”, only miss “Breed”, miss “ZipCode” and “Breed”.</p>
<p>Third, we analyze the right lower corner, which sort the counts of 8 kinds of patterns we mentioned above. We could conclude that most events miss nothing. Events that only miss “Age” come second. Events that miss “Age” and “ZipCode” come third. Events that miss “ZipCode” and “Breed” is the least. We will analyze them separately.</p>
<p>Most events miss nothing, which shows that the quality of our dataset is good.</p>
<p>Many events only miss “Age”. As we discussed above, the most easily unknown characteristic of dogs is “Age”. If dog owners do not know the age of dogs when adopting or purchasing it, it will be difficult to know in the future. Although “breed” and “ZipCode” are also easily be missed, they are a little easier to be obtained than “Age”. The “breed” information can be identified through later medical tests, and “ZipCode” can also be queried after the dog bite events.</p>
<p>Events that miss “Age” and “ZipCode” come third. As we mentioned above, “ZipCode” is easier to be obtained than “Age”. If in an event, we even do not know “ZipCode”, it indicates that the data has limited information about these dogs and dog bite events, it is easy to miss “Age”. In addition, this also indicate that “Breed” is easier to be obtained than “Age” and “ZipCode”, which is consistent with the left upper corner of this plot.</p>
<p>Events that miss “ZipCode” and “Breed” is the least. As we mentioned above, the most easily unknown characteristic of dogs is “Age”. It is easier to obtain “Breed” and “ZipCode”. If we do not even know “Breed” and “ZipCode”, it is less likely to know “Age”.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="missing-values.html#cb24-1" aria-hidden="true" tabindex="-1"></a>DogBiteForPlot <span class="ot">&lt;-</span> <span class="fu">subset</span>(DogBite, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(UniqueID))</span>
<span id="cb24-2"><a href="missing-values.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(DogBiteForPlot, <span class="at">percent =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>In this part, we draw a plot using our function, i.e., plot_missing(DogBiteForPlot, percent = TRUE). The situation is similar to the above plot from plot_missing(DogBiteForPlot, percent = FALSE).</p>
</div>
<div id="missing-by-borough" class="section level3" number="4.0.7">
<h3><span class="header-section-number">4.0.7</span> Missing by borough</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="missing-values.html#cb25-1" aria-hidden="true" tabindex="-1"></a>percent_missing <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="missing-values.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">num_na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">Age</span><span class="st">`</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="missing-values.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> <span class="fu">round</span>(num_na<span class="sc">/</span>num_bites, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="missing-values.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>percent_na)</span>
<span id="cb25-5"><a href="missing-values.html#cb25-5" aria-hidden="true" tabindex="-1"></a>percent_missing</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   Borough       num_bites num_na percent_na
##   &lt;chr&gt;             &lt;int&gt;  &lt;int&gt;      &lt;dbl&gt;
## 1 Bronx              1757    888       0.51
## 2 Manhattan          2354   1169       0.5 
## 3 Brooklyn           2281   1042       0.46
## 4 Queens             2520   1079       0.43
## 5 Staten Island       931    387       0.42
## 6 Other               437    181       0.41</code></pre>
<p>First, we show the percent of missing values of “Age” in different boroughs. Note that we use the entire dataset instead of our 40 samples in this part for better discussion. Events in “Bronx” is most likely to miss “Age”. There is not a large difference between the percent of different boroughs.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="missing-values.html#cb27-1" aria-hidden="true" tabindex="-1"></a>percent_missing <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="missing-values.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">num_na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">Breed</span><span class="st">`</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="missing-values.html#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> <span class="fu">round</span>(num_na<span class="sc">/</span>num_bites, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb27-4"><a href="missing-values.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>percent_na)</span>
<span id="cb27-5"><a href="missing-values.html#cb27-5" aria-hidden="true" tabindex="-1"></a>percent_missing</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   Borough       num_bites num_na percent_na
##   &lt;chr&gt;             &lt;int&gt;  &lt;int&gt;      &lt;dbl&gt;
## 1 Other               437    100       0.23
## 2 Manhattan          2354    484       0.21
## 3 Bronx              1757    255       0.15
## 4 Brooklyn           2281    343       0.15
## 5 Queens             2520    331       0.13
## 6 Staten Island       931     74       0.08</code></pre>
<p>Now we show the percent of missing values of “Breed” in different boroughs. Events in “Other” is most likely to miss “Breed”. One possible reason is that according to our discussion above, there is a connection between “ZipCode” and “Borough”, which indicates that if we do not know the specific borough, it is more likely to miss “ZipCode”. If we do not even know “ZipCode”, it indicates that the data has limited information about these dogs and dog bite events, so it is easy to miss “Breed”.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="missing-values.html#cb29-1" aria-hidden="true" tabindex="-1"></a>percent_missing <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="missing-values.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">num_na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">ZipCode</span><span class="st">`</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="missing-values.html#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> <span class="fu">round</span>(num_na<span class="sc">/</span>num_bites, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="missing-values.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>percent_na)</span>
<span id="cb29-5"><a href="missing-values.html#cb29-5" aria-hidden="true" tabindex="-1"></a>percent_missing</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   Borough       num_bites num_na percent_na
##   &lt;chr&gt;             &lt;int&gt;  &lt;int&gt;      &lt;dbl&gt;
## 1 Other               437    236       0.54
## 2 Manhattan          2354    848       0.36
## 3 Bronx              1757    463       0.26
## 4 Staten Island       931    239       0.26
## 5 Queens             2520    542       0.22
## 6 Brooklyn           2281    336       0.15</code></pre>
<p>Then we show the percent of missing values of “ZipCode” in different boroughs. Events in “Other” is most likely to miss “ZipCode”. One possible reason is that according to our discussion above, there is a connection between “ZipCode” and “Borough”, which indicates that if we do not know the specific borough, it is more likely to miss “ZipCode”.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="missing-values.html#cb31-1" aria-hidden="true" tabindex="-1"></a>percent_missing <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="missing-values.html#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">num_na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">Age</span><span class="st">`</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb31-3"><a href="missing-values.html#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> <span class="fu">round</span>(num_na<span class="sc">/</span>num_bites, <span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-4"><a href="missing-values.html#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>percent_na)</span>
<span id="cb31-5"><a href="missing-values.html#cb31-5" aria-hidden="true" tabindex="-1"></a>DogBitesum <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb31-6"><a href="missing-values.html#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Borough) <span class="sc">%&gt;%</span> </span>
<span id="cb31-7"><a href="missing-values.html#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">meanAge =</span> <span class="fu">round</span>(<span class="fu">mean</span>(<span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">Age</span><span class="st">`</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-8"><a href="missing-values.html#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(percent_missing <span class="sc">%&gt;%</span> <span class="fu">select</span>(Borough, percent_na),</span>
<span id="cb31-9"><a href="missing-values.html#cb31-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;Borough&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-10"><a href="missing-values.html#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(percent_na))</span>
<span id="cb31-11"><a href="missing-values.html#cb31-11" aria-hidden="true" tabindex="-1"></a>DogBitesum</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Borough       meanAge percent_na
##   &lt;chr&gt;           &lt;dbl&gt;      &lt;dbl&gt;
## 1 Bronx             4.2       0.51
## 2 Manhattan         4.9       0.5 
## 3 Brooklyn          4.6       0.46
## 4 Queens            4.7       0.43
## 5 Staten Island     4.9       0.42
## 6 Other             5.1       0.41</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="missing-values.html#cb33-1" aria-hidden="true" tabindex="-1"></a>DogBitesumtidy <span class="ot">&lt;-</span> DogBitesum <span class="sc">%&gt;%</span></span>
<span id="cb33-2"><a href="missing-values.html#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> meanAge,</span>
<span id="cb33-3"><a href="missing-values.html#cb33-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;subject&quot;</span>,</span>
<span id="cb33-4"><a href="missing-values.html#cb33-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;meanscore&quot;</span>)</span>
<span id="cb33-5"><a href="missing-values.html#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(DogBitesumtidy, <span class="fu">aes</span>(meanscore, percent_na, <span class="at">color =</span> Borough)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>subject) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb33-6"><a href="missing-values.html#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>We also explore the relationship between average age of dogs and the missing percent of “Age” in different boroughs. We could roughly infer that the smaller the average age is, the higher the missing percent of “Age” is. However, this relationship is not stable and not obvious.</p>
</div>
<div id="number-of-missing-by-year" class="section level3" number="4.0.8">
<h3><span class="header-section-number">4.0.8</span> Number of missing by year</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="missing-values.html#cb34-1" aria-hidden="true" tabindex="-1"></a>processed_DogBite <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="missing-values.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">case_when</span>(</span>
<span id="cb34-3"><a href="missing-values.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2015&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2015&quot;</span>,</span>
<span id="cb34-4"><a href="missing-values.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2016&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2016&quot;</span>,</span>
<span id="cb34-5"><a href="missing-values.html#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2017&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2017&quot;</span></span>
<span id="cb34-6"><a href="missing-values.html#cb34-6" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb34-7"><a href="missing-values.html#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="missing-values.html#cb34-8" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb34-9"><a href="missing-values.html#cb34-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb34-10"><a href="missing-values.html#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Age)))</span>
<span id="cb34-11"><a href="missing-values.html#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="missing-values.html#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb34-13"><a href="missing-values.html#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-14"><a href="missing-values.html#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb34-15"><a href="missing-values.html#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-16"><a href="missing-values.html#cb34-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-17"><a href="missing-values.html#cb34-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing ages&quot;</span>) <span class="sc">+</span></span>
<span id="cb34-18"><a href="missing-values.html#cb34-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="missing-values.html#cb35-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="missing-values.html#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="missing-values.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Breed)))</span>
<span id="cb35-4"><a href="missing-values.html#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="missing-values.html#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb35-6"><a href="missing-values.html#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-7"><a href="missing-values.html#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb35-8"><a href="missing-values.html#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-9"><a href="missing-values.html#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-10"><a href="missing-values.html#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing breeds&quot;</span>) <span class="sc">+</span></span>
<span id="cb35-11"><a href="missing-values.html#cb35-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="missing-values.html#cb36-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="missing-values.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="missing-values.html#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(ZipCode)))</span>
<span id="cb36-4"><a href="missing-values.html#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="missing-values.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb36-6"><a href="missing-values.html#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-7"><a href="missing-values.html#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb36-8"><a href="missing-values.html#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-9"><a href="missing-values.html#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-10"><a href="missing-values.html#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing ZipCodes&quot;</span>) <span class="sc">+</span></span>
<span id="cb36-11"><a href="missing-values.html#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>We process our data and show the number of missing values by year, i.e., 2015, 2016, and 2017. Note that we use the entire dataset instead of our 40 samples in this part for better discussion. We use three plots to show the situations of “Age”, “Breed”, and “ZipCode” separately. We could see that in all of the three plots, events in 2015 miss most values. From 2015 to 2017, the number of missing values gradually decreased in total (especially for “Breed”). However, we are not sure whether this is due to the optimization of management, or because the data contained in our dataset in 2015 is the most. Thus, we show the proportion of missing values by year then.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="missing-values.html#cb37-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="missing-values.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="missing-values.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Age))) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="missing-values.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num)</span>
<span id="cb37-5"><a href="missing-values.html#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="missing-values.html#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb37-7"><a href="missing-values.html#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-8"><a href="missing-values.html#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb37-9"><a href="missing-values.html#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-10"><a href="missing-values.html#cb37-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-11"><a href="missing-values.html#cb37-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing ages&quot;</span>) <span class="sc">+</span></span>
<span id="cb37-12"><a href="missing-values.html#cb37-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="missing-values.html#cb38-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="missing-values.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="missing-values.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Breed))) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="missing-values.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num)</span>
<span id="cb38-5"><a href="missing-values.html#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="missing-values.html#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb38-7"><a href="missing-values.html#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-8"><a href="missing-values.html#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb38-9"><a href="missing-values.html#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-10"><a href="missing-values.html#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-11"><a href="missing-values.html#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing breeds&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-12"><a href="missing-values.html#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="missing-values.html#cb39-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="missing-values.html#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="missing-values.html#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(ZipCode))) <span class="sc">%&gt;%</span></span>
<span id="cb39-4"><a href="missing-values.html#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num)</span>
<span id="cb39-5"><a href="missing-values.html#cb39-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-6"><a href="missing-values.html#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb39-7"><a href="missing-values.html#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-8"><a href="missing-values.html#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> missing<span class="sc">$</span>Year) <span class="sc">+</span></span>
<span id="cb39-9"><a href="missing-values.html#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by year&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-10"><a href="missing-values.html#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-11"><a href="missing-values.html#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing ZipCodes&quot;</span>) <span class="sc">+</span></span>
<span id="cb39-12"><a href="missing-values.html#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>We found that in the proportion of missing values by year, it is clear that as time goes on, the proportion of missing value has a decreasing trend, especially for “Breed” and “ZipCode”. One possible reason is that the government has strengthened its management of dog bites and put forward higher requirements for data integrity. As a result, there are less missing values in 2017.</p>
</div>
<div id="number-of-missing-by-month" class="section level3" number="4.0.9">
<h3><span class="header-section-number">4.0.9</span> Number of missing by month</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="missing-values.html#cb40-1" aria-hidden="true" tabindex="-1"></a>processed_DogBite <span class="ot">&lt;-</span> DogBite <span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="missing-values.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Month =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-3"><a href="missing-values.html#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;January&quot;</span>) <span class="sc">~</span> <span class="st">&quot;01&quot;</span>,</span>
<span id="cb40-4"><a href="missing-values.html#cb40-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;February&quot;</span>) <span class="sc">~</span> <span class="st">&quot;02&quot;</span>,</span>
<span id="cb40-5"><a href="missing-values.html#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;March&quot;</span>) <span class="sc">~</span> <span class="st">&quot;03&quot;</span>,</span>
<span id="cb40-6"><a href="missing-values.html#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;April&quot;</span>) <span class="sc">~</span> <span class="st">&quot;04&quot;</span>,</span>
<span id="cb40-7"><a href="missing-values.html#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;May&quot;</span>) <span class="sc">~</span> <span class="st">&quot;05&quot;</span>,</span>
<span id="cb40-8"><a href="missing-values.html#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;June&quot;</span>) <span class="sc">~</span> <span class="st">&quot;06&quot;</span>,</span>
<span id="cb40-9"><a href="missing-values.html#cb40-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;July&quot;</span>) <span class="sc">~</span> <span class="st">&quot;07&quot;</span>,</span>
<span id="cb40-10"><a href="missing-values.html#cb40-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;August&quot;</span>) <span class="sc">~</span> <span class="st">&quot;08&quot;</span>,</span>
<span id="cb40-11"><a href="missing-values.html#cb40-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;September&quot;</span>) <span class="sc">~</span> <span class="st">&quot;09&quot;</span>,</span>
<span id="cb40-12"><a href="missing-values.html#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;October&quot;</span>) <span class="sc">~</span> <span class="st">&quot;10&quot;</span>,</span>
<span id="cb40-13"><a href="missing-values.html#cb40-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;November&quot;</span>) <span class="sc">~</span> <span class="st">&quot;11&quot;</span>,</span>
<span id="cb40-14"><a href="missing-values.html#cb40-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;December&quot;</span>) <span class="sc">~</span> <span class="st">&quot;12&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb40-15"><a href="missing-values.html#cb40-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Year =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-16"><a href="missing-values.html#cb40-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2015&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2015&quot;</span>,</span>
<span id="cb40-17"><a href="missing-values.html#cb40-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2016&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2016&quot;</span>,</span>
<span id="cb40-18"><a href="missing-values.html#cb40-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(DogBite<span class="sc">$</span>DateOfBite, <span class="st">&quot;2017&quot;</span>) <span class="sc">~</span> <span class="st">&quot;2017&quot;</span>)) </span>
<span id="cb40-19"><a href="missing-values.html#cb40-19" aria-hidden="true" tabindex="-1"></a>processed_DogBite<span class="sc">$</span>CombinedDate <span class="ot">&lt;-</span> <span class="fu">str_c</span>(processed_DogBite<span class="sc">$</span>Year, <span class="st">&quot;-&quot;</span>, processed_DogBite<span class="sc">$</span>Month)</span>
<span id="cb40-20"><a href="missing-values.html#cb40-20" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb40-21"><a href="missing-values.html#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb40-22"><a href="missing-values.html#cb40-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Age))) <span class="sc">%&gt;%</span></span>
<span id="cb40-23"><a href="missing-values.html#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb40-24"><a href="missing-values.html#cb40-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-25"><a href="missing-values.html#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb40-26"><a href="missing-values.html#cb40-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-27"><a href="missing-values.html#cb40-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb40-28"><a href="missing-values.html#cb40-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-29"><a href="missing-values.html#cb40-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-30"><a href="missing-values.html#cb40-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing ages&quot;</span>) <span class="sc">+</span></span>
<span id="cb40-31"><a href="missing-values.html#cb40-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="missing-values.html#cb41-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="missing-values.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="missing-values.html#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Breed))) <span class="sc">%&gt;%</span></span>
<span id="cb41-4"><a href="missing-values.html#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb41-5"><a href="missing-values.html#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="missing-values.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb41-7"><a href="missing-values.html#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-8"><a href="missing-values.html#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb41-9"><a href="missing-values.html#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-10"><a href="missing-values.html#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-11"><a href="missing-values.html#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing breeds&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-12"><a href="missing-values.html#cb41-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="missing-values.html#cb42-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="missing-values.html#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="missing-values.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(ZipCode))) <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="missing-values.html#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb42-5"><a href="missing-values.html#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="missing-values.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> sum.na)) <span class="sc">+</span></span>
<span id="cb42-7"><a href="missing-values.html#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-8"><a href="missing-values.html#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb42-9"><a href="missing-values.html#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Number of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-10"><a href="missing-values.html#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-11"><a href="missing-values.html#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Number of missing ZipCodes&quot;</span>) <span class="sc">+</span></span>
<span id="cb42-12"><a href="missing-values.html#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p>For further analysis, we process our data and show the number of missing values by month, e.g., 2015-01, 2015-02. Note that we use the entire dataset instead of our 40 samples in this part for better discussion. We use three plots to show the situations of “Age”, “Breed”, and “ZipCode” separately. We could see that from 2015 to 2017, the number of missing values gradually decreased in total (especially for “Breed”). In addition, the plot has the periodicity, and the number of missing values increases in summer of each year. However, we are not sure whether this is due to the optimization of management and particularity of summer, or because the data quantity. Thus, we show the proportion of missing values by month then.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="missing-values.html#cb43-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="missing-values.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="missing-values.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Age))) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="missing-values.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num_bites) <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="missing-values.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb43-6"><a href="missing-values.html#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="missing-values.html#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb43-8"><a href="missing-values.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb43-9"><a href="missing-values.html#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb43-10"><a href="missing-values.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-11"><a href="missing-values.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-12"><a href="missing-values.html#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing ages&quot;</span>) <span class="sc">+</span></span>
<span id="cb43-13"><a href="missing-values.html#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="missing-values.html#cb44-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="missing-values.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="missing-values.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Breed))) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="missing-values.html#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num_bites) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="missing-values.html#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb44-6"><a href="missing-values.html#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="missing-values.html#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb44-8"><a href="missing-values.html#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb44-9"><a href="missing-values.html#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb44-10"><a href="missing-values.html#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-11"><a href="missing-values.html#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-12"><a href="missing-values.html#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing breeds&quot;</span>) <span class="sc">+</span></span>
<span id="cb44-13"><a href="missing-values.html#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-36-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="missing-values.html#cb45-1" aria-hidden="true" tabindex="-1"></a>missing <span class="ot">&lt;-</span> processed_DogBite <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="missing-values.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(CombinedDate) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="missing-values.html#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_bites =</span> <span class="fu">n</span>(), <span class="at">sum.na =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(ZipCode))) <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="missing-values.html#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">percent_na =</span> sum.na<span class="sc">/</span>num_bites) <span class="sc">%&gt;%</span> </span>
<span id="cb45-5"><a href="missing-values.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(CombinedDate)</span>
<span id="cb45-6"><a href="missing-values.html#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="missing-values.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(missing, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">y =</span> percent_na)) <span class="sc">+</span></span>
<span id="cb45-8"><a href="missing-values.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb45-9"><a href="missing-values.html#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>, <span class="at">labels =</span> missing<span class="sc">$</span>CombinedDate) <span class="sc">+</span></span>
<span id="cb45-10"><a href="missing-values.html#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Proportion of missing values by month&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-11"><a href="missing-values.html#cb45-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-12"><a href="missing-values.html#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Proportion of missing ZipCodes&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-13"><a href="missing-values.html#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span></code></pre></div>
<p><img src="finalproj_files/figure-html/unnamed-chunk-37-1.png" width="672" /></p>
<p>We found that in the proportion of missing values by month, it is clear that as time goes on, the proportion of missing value has a decreasing trend. One possible reason is that the government has strengthened its management of dog bites and put forward higher requirements for data integrity. In addition, the plot has the periodicity, and the proportion of missing values increases in summer of each year. We do not know the reason now. We will further analyze the time series in our final project to try to solve this problem.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rul124/DogBiteAnalysis/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/rul124/DogBiteAnalysis/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
